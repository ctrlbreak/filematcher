# Requirements Archive: v1.3 Code Unification

**Archived:** 2026-01-23
**Status:** SHIPPED

This is the archived requirements specification for v1.3.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: File Matcher v1.2/v1.3

**Defined:** 2026-01-22
**Core Value:** Safely deduplicate files across directories while preserving the master copy and logging all changes.

## v1.2/v1.3 Requirements

Requirements for output rationalisation and code unification milestones. Each maps to roadmap phases.

### Output Consistency

- [x] **OUT-01**: Output structure is consistent between compare mode and action mode
- [x] **OUT-02**: Statistics footer appears in all modes (duplicate groups, file counts, space calculations)
- [x] **OUT-03**: Progress and status messages go to stderr, data output goes to stdout
- [x] **OUT-04**: Output is deterministic (same input produces same output ordering)

### Machine-Readable Output

- [x] **JSON-01**: `--json` flag outputs results in JSON format
- [x] **JSON-02**: JSON schema is documented and stable
- [x] **JSON-03**: JSON includes rich metadata (file sizes, hashes, timestamps)
- [x] **JSON-04**: `--json` works with all existing flags (--summary, --verbose, --action, etc.)

### Enhanced UX

- [x] **UX-01**: Color output for terminal (TTY-aware, automatically disabled in pipes)
- [x] **UX-02**: Color highlights key information (masters, duplicates, warnings, stats)
- [x] **UX-03**: `--no-color` flag to explicitly disable colors

## Traceability

Which phases cover which requirements. Updated during roadmap creation.

| Requirement | Phase | Status |
|-------------|-------|--------|
| OUT-01 | Phase 7 | Complete |
| OUT-02 | Phase 7 | Complete |
| OUT-03 | Phase 7 | Complete |
| OUT-04 | Phase 5 | Complete |
| JSON-01 | Phase 6 | Complete |
| JSON-02 | Phase 6 | Complete |
| JSON-03 | Phase 6 | Complete |
| JSON-04 | Phase 6 | Complete |
| UX-01 | Phase 8 | Complete |
| UX-02 | Phase 8 | Complete |
| UX-03 | Phase 8 | Complete |

**Coverage:**
- v1.2/v1.3 requirements: 11 total
- Mapped to phases: 11
- Unmapped: 0

**Phase Distribution:**
- Phase 5 (Formatter Abstraction): 1 requirement (OUT-04)
- Phase 6 (JSON Output): 4 requirements (JSON-01, JSON-02, JSON-03, JSON-04)
- Phase 7 (Output Unification): 3 requirements (OUT-01, OUT-02, OUT-03)
- Phase 8 (Color Enhancement): 3 requirements (UX-01, UX-02, UX-03)

---

## Milestone Summary

**Shipped:** 11 of 11 requirements (100%)
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-01-23 as part of v1.3 milestone completion*
