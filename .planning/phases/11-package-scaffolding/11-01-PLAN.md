---
phase: 11-package-scaffolding
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - filematcher/__init__.py
  - filematcher/__main__.py
autonomous: true

must_haves:
  truths:
    - "`from filematcher import main` imports successfully"
    - "`python -m filematcher --help` displays help text"
    - "All 217 tests pass unchanged"
  artifacts:
    - path: "filematcher/__init__.py"
      provides: "Package re-exports from file_matcher.py"
      contains: "from file_matcher import"
    - path: "filematcher/__main__.py"
      provides: "python -m filematcher entry point"
      contains: "from filematcher import main"
  key_links:
    - from: "filematcher/__init__.py"
      to: "file_matcher.py"
      via: "import statement"
      pattern: "from file_matcher import"
    - from: "filematcher/__main__.py"
      to: "filematcher/__init__.py"
      via: "import main"
      pattern: "from filematcher import main"
---

<objective>
Create the filematcher/ package structure with re-export foundation.

Purpose: Establish package scaffolding that imports all public symbols from file_matcher.py, enabling gradual code migration in future phases while maintaining backward compatibility.

Output: Working filematcher/ package with __init__.py (re-exports) and __main__.py (python -m support)
</objective>

<execution_context>
@/Users/patrick/.claude/get-shit-done/workflows/execute-plan.md
@/Users/patrick/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/research/SUMMARY.md
@file_matcher.py
@pyproject.toml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create filematcher/__init__.py with re-exports</name>
  <files>filematcher/__init__.py</files>
  <action>
Create the filematcher/ directory and __init__.py that re-exports all public symbols from file_matcher.py.

1. Create directory: `filematcher/`

2. Create `filematcher/__init__.py` with:
   - Docstring explaining this is the package entry point
   - Import and re-export all public classes and functions from file_matcher.py
   - Define __all__ listing all exported symbols
   - Include __version__ = "1.1.0"

Public symbols to re-export (based on current file_matcher.py exports and test usage):
- ColorMode, ColorConfig (color system)
- ActionFormatter, TextActionFormatter, JsonActionFormatter (formatters)
- get_file_hash, get_sparse_hash (hashing)
- index_directory, find_matching_files, select_master_file (directory ops)
- execute_action, safe_replace_with_link, execute_all_actions (actions)
- is_hardlink_to, is_symlink_to, check_cross_filesystem, get_device_id (filesystem)
- create_audit_logger, log_operation, write_log_header, write_log_footer (logging)
- determine_exit_code (CLI helpers)
- main (entry point)
- green, yellow, red, cyan, dim, bold (color helpers)
- format_file_size, format_relative_time (utilities)
- GroupLine, SpaceInfo (dataclasses if exported)

Pattern to use:
```python
"""File Matcher package - find and deduplicate files across directories."""

from file_matcher import (
    # List all imports...
)

__version__ = "1.1.0"
__all__ = [
    # List all exports...
]
```

Do NOT modify file_matcher.py in any way.
  </action>
  <verify>
Run: `python -c "from filematcher import main, get_file_hash, ColorConfig; print('Import OK')"`
Expected: "Import OK" with no errors
  </verify>
  <done>
`from filematcher import X` works for all public symbols exported by file_matcher.py
  </done>
</task>

<task type="auto">
  <name>Task 2: Create filematcher/__main__.py for python -m support</name>
  <files>filematcher/__main__.py</files>
  <action>
Create `filematcher/__main__.py` to enable `python -m filematcher` invocation.

Content:
```python
"""Entry point for python -m filematcher."""

import sys
from filematcher import main

if __name__ == "__main__":
    sys.exit(main())
```

This is the standard pattern for python -m support. The module imports main from the package (which re-exports from file_matcher.py), then calls it when run as __main__.
  </action>
  <verify>
Run: `python -m filematcher --help`
Expected: Help text displayed (same as `python file_matcher.py --help`)
  </verify>
  <done>
`python -m filematcher --help` displays help text identical to `python file_matcher.py --help`
  </done>
</task>

</tasks>

<verification>
1. Package imports work:
   ```bash
   python -c "from filematcher import main, get_file_hash, ColorConfig, find_matching_files; print('All imports OK')"
   ```

2. python -m entry point works:
   ```bash
   python -m filematcher --help
   ```

3. All 217 tests still pass:
   ```bash
   python3 run_tests.py
   ```
   Expected: 217 tests, all passing

4. Verify no circular imports:
   ```bash
   python -c "import filematcher; print('No circular imports')"
   ```
</verification>

<success_criteria>
- [ ] `filematcher/__init__.py` exists and re-exports all public symbols
- [ ] `filematcher/__main__.py` exists and enables python -m filematcher
- [ ] `from filematcher import main` imports successfully
- [ ] `python -m filematcher --help` displays help text
- [ ] All 217 tests pass unchanged (run `python3 run_tests.py`)
- [ ] No modifications to file_matcher.py or any test files
</success_criteria>

<output>
After completion, create `.planning/phases/11-package-scaffolding/11-01-SUMMARY.md`
</output>
